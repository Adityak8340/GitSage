{% extends 'base.html' %}

{% block title %}{{ repo.name }} - GitSage{% endblock %}

{% block content %}
<div class="repo-layout">
    <div class="sidebar card">
        <h2>{{ repo.name }}</h2>
        <div class="stats-grid">
            <div class="stat-item">
                <span class="stat-value">{{ repo.stargazers_count }}</span>
                <span class="stat-label">Stars</span>
            </div>
            <div class="stat-item">
                <span class="stat-value">{{ repo.forks_count }}</span>
                <span class="stat-label">Forks</span>
            </div>
        </div>
        <div class="directory-tree" id="directory-tree">
            <!-- Tree will be populated by JavaScript -->
            <div class="loading">Loading files...</div>
        </div>
    </div>
    
    <div class="file-viewer card">
        <div class="file-viewer-header">
            <div id="current-file-path"></div>
        </div>
        <div class="code-display">
            <div class="code-scroll-container">
                <pre><code id="code-content" class="hljs">Select a file to view its contents</code></pre>
            </div>
        </div>
        <div class="chat-interface">
            <div class="chat-messages" id="chat-messages"></div>
            <form class="chat-input-form" id="chat-form">
                <input type="text" id="chat-input" placeholder="Ask about the code...">
                <button type="submit">Send</button>
            </form>
        </div>
    </div>
</div>

<script src="{{ static('js/repository.js') }}"></script>
<script src="{{ static('js/chat.js') }}"></script>

<script>
// Debug information
console.log('Repository template loaded');
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM content loaded in repository template');
    console.log('Repo Owner:', '{{ repo.owner.login }}');
    console.log('Repo Name:', '{{ repo.name }}');
});
</script>
{% endblock %}
